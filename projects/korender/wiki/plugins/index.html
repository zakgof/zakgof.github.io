<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
      <link rel="shortcut icon" href="../img/favicon.ico" />
    <title>Plugins - Korender Wiki</title>
    <link rel="stylesheet" href="../css/theme.css" />
    <link rel="stylesheet" href="../css/theme_extra.css" />
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/github.min.css" />
    
      <script>
        // Current page data
        var mkdocs_page_name = "Plugins";
        var mkdocs_page_input_path = "plugins.md";
        var mkdocs_page_url = null;
      </script>
    
    <!--[if lt IE 9]>
      <script src="../js/html5shiv.min.js"></script>
    <![endif]-->
      <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/highlight.min.js"></script>
      <script>hljs.highlightAll();</script> 
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
    <div class="wy-side-scroll">
      <div class="wy-side-nav-search">
          <a href=".." class="icon icon-home"> Korender Wiki
        </a><div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../search.html" method="get">
      <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" title="Type search term here" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="..">Home</a>
                </li>
              </ul>
              <p class="caption"><span class="caption-text">User Guide</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../context/">Contexts</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../assets/">Asset management</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../renderables/">Renderables</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../materials/">Materials</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../meshes/">Meshes</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../projection/">Projection and camera</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../light/">Lights and shadows</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../sky/">Sky rendering</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../env/">Environment mapping</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../filters/">Post-process filters</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../effects/">Effects</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../gltf/">GTLF support</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../terrain/">Terrain</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../gui/">GUI</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../billboards/">Billboards</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../instancing/">Instancing</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../deferred/">Deferred renderer</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../offscreen/">Offscreen rendering</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Extending Korender</span></p>
              <ul class="current">
                  <li class="toctree-l1 current"><a class="reference internal current" href="#">Plugins</a>
    <ul class="current">
    <li class="toctree-l2"><a class="reference internal" href="#extension-points">Extension points</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#vertex-shader-extensions">Vertex shader extensions</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#fragment-shader-extensions">Fragment shader extensions</a>
    </li>
        </ul>
    </li>
    </ul>
                  </li>
              </ul>
      </div>
    </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">
      <nav class="wy-nav-top" role="navigation" aria-label="Mobile navigation menu">
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="..">Korender Wiki</a>
        
      </nav>
      <div class="wy-nav-content">
        <div class="rst-content"><div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href=".." class="icon icon-home" aria-label="Docs"></a></li>
          <li class="breadcrumb-item">Extending Korender</li>
      <li class="breadcrumb-item active">Plugins</li>
    <li class="wy-breadcrumbs-aside">
    </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
            <div class="section" itemprop="articleBody">
              
                <h1 id="plugins">Plugins</h1>
<p>While Korender materials offer a robust set of built-in rendering features, advanced use cases may require custom logic beyond the standard parameters. To support this, Korender utilizes <em>Shader Plugins</em>.</p>
<p>Shader Plugins are modular blocks of GLSL code that allow developers to extend the engine's core rendering functionality. These plugins are injected into the pipeline at predefined Extension Points, enabling custom behavior without requiring a full rewrite of the base shaders.</p>
<p>Plugin may introduce their own uniforms to parameterize the material. Also they have access to fragment/vertex properties.</p>
<h2 id="extension-points">Extension points</h2>
<h3 id="vertex-shader-extensions">Vertex shader extensions</h3>
<table>
<thead>
<tr>
<th>Extension Point</th>
<th>Function signature</th>
<th>Return value</th>
</tr>
</thead>
<tbody>
<tr>
<td>vposition</td>
<td>vec4 pluginVPosition()</td>
<td>Vertex world space position</td>
</tr>
<tr>
<td>vnormal</td>
<td>vec3 pluginVNormal()</td>
<td>Vertex world space normal</td>
</tr>
</tbody>
</table>
<p>Global variables available to vertex plugins:</p>
<pre><code class="language-glsl">in vec3 pos;        // vertex attribute
in vec3 normal;     // vertex attribute
in vec2 tex;        // vertex attribute
#uniform mat4 model;    // model matrix
</code></pre>
<h3 id="fragment-shader-extensions">Fragment shader extensions</h3>
<table>
<thead>
<tr>
<th>Extension Point</th>
<th>Function signature</th>
<th>Return value</th>
</tr>
</thead>
<tbody>
<tr>
<td>position</td>
<td>vec3 pluginPosition()</td>
<td>Overrides world-space fragment position</td>
</tr>
<tr>
<td>texturing</td>
<td>vec4 pluginTexturing()</td>
<td>Multiplier for texture color</td>
</tr>
<tr>
<td>normal</td>
<td>vec3 pluginNormal()</td>
<td>Overrides world-space normal</td>
</tr>
<tr>
<td>albedo</td>
<td>vec4 pluginAlbedo()</td>
<td>Overrides fragment albedo (unlit color)</td>
</tr>
<tr>
<td>discard</td>
<td>bool pluginDiscard()</td>
<td>Overrides fragment discard test</td>
</tr>
<tr>
<td>emission</td>
<td>vec3 pluginEmission()</td>
<td>Defines light emission color</td>
</tr>
<tr>
<td>metallic_roughness</td>
<td>vec2 pluginMetallicRoughness</td>
<td>Overrides material's metallic and roughness factors</td>
</tr>
<tr>
<td>specular_glossiness</td>
<td>vec2 pluginSpecularGlossiness</td>
<td>Switched material model to specular/glossiness and provides the corresponding factors</td>
</tr>
<tr>
<td>occlusion</td>
<td>float pluginOcclusion</td>
<td>Overrides occlusion value at fragment</td>
</tr>
</tbody>
</table>
<p>Global variables available to fragment plugins:</p>
<pre><code class="language-glsl">in vec3 vpos;       // world position from vertex shader
in vec3 vnormal;    // normal from vertex shader
in vec2 vtex;       // texture coordinates
vec3 position;      // world position (may be modified in the shader)
vec4 albedo;        // fragment albedo (unlit color)
vec3 normal;        // normal (may be modified in the shader)
vec3 emission;      // emission color
float metallic;     // metallic factor
float roughness;    // roughness factor
vec3 look;      // world space vector from camera to fragment
</code></pre>
<p>Example: </p>
<p><code>texturing.wave.frag</code>:</p>
<pre><code class="language-glsl">#uniform float wavescale;

vec4 pluginTexturing() {
    float wave = 0.5 + 0.5 * sin(vtex.x * wavescale) * sin(vtex.y * wavescale); 
    return vec4(wave, 0., 0., 1.);
}
</code></pre>
<pre><code class="language-kotlin">Renderable(
  base(),
  plugin(&quot;texturing&quot;, &quot;shaders/texturing.wave.frag&quot;),
  uniform(&quot;wavescale&quot;, 10f),
  mesh = ....
...
</code></pre>
              
            </div>
          </div><footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="Footer Navigation">
        <a href="../offscreen/" class="btn btn-neutral float-left" title="Offscreen rendering"><span class="icon icon-circle-arrow-left"></span> Previous</a>
    </div>

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
  </div>

  Built with <a href="https://www.mkdocs.org/">MkDocs</a> using a <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
          
        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" aria-label="Versions">
  <span class="rst-current-version" data-toggle="rst-current-version">
    
    
      <span><a href="../offscreen/" style="color: #fcfcfc">&laquo; Previous</a></span>
    
    
  </span>
</div>
    <script src="../js/jquery-3.6.0.min.js"></script>
    <script>var base_url = "..";</script>
    <script src="../js/theme_extra.js"></script>
    <script src="../js/theme.js"></script>
      <script src="../search/main.js"></script>
    <script>
        jQuery(function () {
            SphinxRtdTheme.Navigation.enable(true);
        });
    </script>

</body>
</html>
